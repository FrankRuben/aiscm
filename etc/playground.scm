(use-modules (oop goops)
             (srfi srfi-1)
             (srfi srfi-26)
             (system foreign)
             (aiscm element)
             (aiscm int)
             (aiscm sequence)
             (aiscm mem)
             (aiscm pointer)
             (aiscm rgb)
             (aiscm obj)
             (aiscm asm)
             (aiscm jit)
             (aiscm method)
             (aiscm util)
             (guile-tap))


;(define a (var <int>)); TODO: rename "prog" in some places?
;(define prog (list (MOV a EDI) (blocked RAX (MOV EAX a) (RET))))
;(blocked-intervals prog)
;(filter-blocks prog)
;(define flat (flatten-code (filter-blocks prog)))
;(variables flat)
;(define intervals (live-intervals (live-analysis flat '()) (variables flat)))
;(linear-scan-coloring (list (cons a '(0 . 1))) (list RAX RCX) '())

; TODO: remove blocked (overlap-interval)

(run-tests)
