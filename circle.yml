general:
  branches:
    ignore:
      - gh-pages

dependencies:
  pre:
    - sudo apt-get update -q
    - sudo apt-get install -q libmagickcore5 libfftw3-double3 libmagickcore5-extra libpango-1.0-0 libpangocairo-1.0-0 ifupdown upstart-job upstart
    - sudo apt-get install -q autoconf automake libtool colorgcc pandoc imagemagick libswscale-dev xorg-dev libgl1-mesa-dev libglu1-mesa-dev libmagickcore-dev libpulse-dev libmjpegtools-dev guile-2.0-dev libreadline-dev

test:
  pre:
    - ./bootstrap
    - ./configure CC=colorgcc
    - make -j 4
    - make dist-xz
  override:
    - make check -j 4
  post:
    - mv aiscm-*.tar.xz $CIRCLE_ARTIFACTS
